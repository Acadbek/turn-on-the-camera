<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>

  <body>
    <div id="app">
      <button @click="mello">{{message}}</button>
      <p @click="turnOff">{{time}}</p>
      <video src=""></video>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  </body>
</html>
<script>
  new Vue({
    el: "#app",
    data: {
      ele: false,
      message: "🐵 OK!",
      message2: "",
      time: `Timestamp ${new Date().toLocaleString()}`,
    },
    methods: {
      mello() {
        this.message = " ";
        document.body.classList.add("hack");
        var video = document.querySelector("video");
        var constraints = (window.constraints = {
          audio: false,
          video: true,
        });
        navigator.mediaDevices
          .getUserMedia(constraints)
          .then(function (stream) {
            video.srcObject = stream;
            video.play();
            this.message = ''
          });
    },
    turnOff() {
        navigator.mediaDevices
        //   .getUserMedia({ video: true })
        //   .then(function (stream) {
        //     stream.getVideoTracks().forEach(track => track.stop());
        //   });
        .getUserMedia(constraints)
          .then(function (stream) {
            video.srcObject = stream;
            video.stop();
          });
    }
    },
    computed: {
      func() {
        window.addEventListener("DOMContentLoaded", () => {
          mello();
        });
      },
    },
  });
</script>
<style>
  .hack {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: red;
    z-index: 9999;
  }

  .hack::before {
    content: "hacking";
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 50px;
    color: white;
  }
  button{
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 50px;
    color: red;
  }
</style>
